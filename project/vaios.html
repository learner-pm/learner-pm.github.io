<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.38">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="/images/logo.png"><link rel="icon" href="/images/favicon.ico"><link rel="stylesheet" href="/css/index.css"><title>Vaios | 网站学习</title><meta name="description" content="PM的个人学习博客">
    <link rel="modulepreload" href="/assets/app.310117e3.js"><link rel="modulepreload" href="/assets/vaios.html.0712c107.js"><link rel="modulepreload" href="/assets/vaios.html.9b20ebd6.js">
    <link rel="stylesheet" href="/assets/style.3a8856d4.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header ref_key="navbar" class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><!----><span class="site-name">网站学习</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="前端"><span class="title">前端</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="前端"><span class="title">前端</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/frontEnd/basic/" class="" aria-label="基础"><!--[--><!--]--> 基础 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/frontEnd/frame/vueReact/" class="" aria-label="提升"><!--[--><!--]--> 提升 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><a href="/dataStructure/algorithm/" class="" aria-label="数据结构和算法"><!--[--><!--]--> 数据结构和算法 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/project/" class="router-link-active" aria-label="项目"><!--[--><!--]--> 项目 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/cicd/" class="" aria-label="CICD"><!--[--><!--]--> CICD <!--[--><!--]--></a></div><div class="navbar-item"><a href="/learn/" class="" aria-label="记录"><!--[--><!--]--> 记录 <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/learner-pm" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><div id="docsearch-container"></div></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="前端"><span class="title">前端</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="前端"><span class="title">前端</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/frontEnd/basic/" class="" aria-label="基础"><!--[--><!--]--> 基础 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/frontEnd/frame/vueReact/" class="" aria-label="提升"><!--[--><!--]--> 提升 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><a href="/dataStructure/algorithm/" class="" aria-label="数据结构和算法"><!--[--><!--]--> 数据结构和算法 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/project/" class="router-link-active" aria-label="项目"><!--[--><!--]--> 项目 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/cicd/" class="" aria-label="CICD"><!--[--><!--]--> CICD <!--[--><!--]--></a></div><div class="navbar-item"><a href="/learn/" class="" aria-label="记录"><!--[--><!--]--> 记录 <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/learner-pm" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading active">项目 <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/project/" class="router-link-active sidebar-item" aria-label="All"><!--[--><!--]--> All <!--[--><!--]--></a><!----></li><li><a href="/project/one.html" class="sidebar-item" aria-label="毕设"><!--[--><!--]--> 毕设 <!--[--><!--]--></a><!----></li><li><a href="/project/thesis.html" class="sidebar-item" aria-label="设计"><!--[--><!--]--> 设计 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/project/vaios.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="Vaios"><!--[--><!--]--> Vaios <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/project/vaios.html#插值表达式" class="router-link-active router-link-exact-active sidebar-item" aria-label="插值表达式"><!--[--><!--]--> 插值表达式 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/project/vaios.html#compile" class="router-link-active router-link-exact-active sidebar-item" aria-label="compile"><!--[--><!--]--> compile <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/project/vaios.html#observer" class="router-link-active router-link-exact-active sidebar-item" aria-label="observer"><!--[--><!--]--> observer <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/project/vaios.html#mount" class="router-link-active router-link-exact-active sidebar-item" aria-label="mount()"><!--[--><!--]--> mount() <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/project/vaios.html#效果" class="router-link-active router-link-exact-active sidebar-item" aria-label="效果："><!--[--><!--]--> 效果： <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/project/vaios.html#元素属性" class="router-link-active router-link-exact-active sidebar-item" aria-label="元素属性"><!--[--><!--]--> 元素属性 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/project/vaios.html#双向绑定" class="router-link-active router-link-exact-active sidebar-item" aria-label="双向绑定"><!--[--><!--]--> 双向绑定 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="vaios" tabindex="-1"><a class="header-anchor" href="#vaios" aria-hidden="true">#</a> Vaios</h1><p>用了<code>React</code>和<code>Vue</code>,自己试着写个<code>mvvm</code>库。</p><h2 id="插值表达式" tabindex="-1"><a class="header-anchor" href="#插值表达式" aria-hidden="true">#</a> 插值表达式</h2><p>这是一个 html 结构。明显，采用<code>{}</code>包裹起来得字符串是变量，第一步需要找到这个变量，再去替换 text，把变量转换成对应的<code>value</code>。</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>
    one
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span> mes的值是：{mes}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/&gt;</span></span>
    zero得值是:{zero}
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>two zero:{zero}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>
    three
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>{three}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>预计使用形式如下，嘿嘿，模仿<code>Vue</code>,在构造函数中传入一个对象，包含根节点，变量对象等。下面一步步去实现。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> vaios <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vaios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">el</span><span class="token operator">:</span> <span class="token string">&quot;app&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">mes</span><span class="token operator">:</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">zero</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token literal-property property">three</span><span class="token operator">:</span> <span class="token string">&quot;dsdsadsadsadsadas3&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>流程图如下： <img src="/assets/vaios_one.6576ced0.png" width="100%"></p><p>首先是构造函数得使用，需要使用<code>new</code>关键字生成一个可维护得对象存在，并且来提供组多方法。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">new</span><span class="token punctuation">.</span>target <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;use new keyword&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// ...对输入参数进行判断</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="compile" tabindex="-1"><a class="header-anchor" href="#compile" aria-hidden="true">#</a> compile</h3><p>首先通过<em>id</em>找到 dom 根节点。获取<code>data</code>数据，然后递归遍历 dom 结构。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> rootDom <span class="token operator">=</span> <span class="token function">root</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//获取节点</span>
Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>getVarArr<span class="token punctuation">.</span>data<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//收集初始data变量对象</span>
<span class="token function">lookAllDom</span><span class="token punctuation">(</span>rootDom<span class="token punctuation">,</span> component<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//开始递归</span>
<span class="token keyword">return</span> getVarArr<span class="token punctuation">;</span> <span class="token comment">//返回依赖</span>

<span class="token keyword">const</span> getVarArr <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">arr</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">//收集依赖</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>具体递归函数，当前主要是文本得替换。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">forEach</span><span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>dom<span class="token punctuation">.</span>childNodes<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">nodes</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>nodes<span class="token punctuation">.</span>nodeType<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token number">1</span><span class="token operator">:</span> <span class="token comment">//处理dom相关操作，属性，表达式等</span>
      <span class="token function">isDom</span><span class="token punctuation">(</span>nodes<span class="token punctuation">,</span> getVarArr<span class="token punctuation">.</span>data<span class="token punctuation">,</span> component<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">lookAllDom</span><span class="token punctuation">(</span>nodes<span class="token punctuation">,</span> component<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token number">3</span><span class="token operator">:</span> <span class="token comment">//文本节点得替换</span>
      <span class="token function">isText</span><span class="token punctuation">(</span>nodes<span class="token punctuation">,</span> getVarArr<span class="token punctuation">,</span> component<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token number">8</span><span class="token operator">:</span> <span class="token comment">//注释</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">default</span><span class="token operator">:</span>
      <span class="token function">lookAllDom</span><span class="token punctuation">(</span>nodes<span class="token punctuation">,</span> component<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>递归调用过程中，传递给替换文本参数有，node 节点，依赖收集对象（含初始 data），当前组件。</p><p>首先对文本节点得 text 进行校验``:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">const</span> isVar <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\{((?:.|\n)+?)\}</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isVar<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>text<span class="token punctuation">.</span>nodeValue<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>如果当前 text 包含插值表达式，就将 text 变成使用*``*包裹得字符串，变量使用<code>${}</code>进行替换。 先获取一个字符串中所以满足得子字符串：<code>const regArr = _text.match(varG);</code>。</p><p>接着对<code>regArr</code>进行循环，按照每次循环得数组值进行字符串分割：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> _text <span class="token operator">=</span> text<span class="token punctuation">.</span>nodeValue<span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> regArr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> arr <span class="token operator">=</span> _text<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span>regArr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>然后进行拼接：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>str <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>str<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>
  <span class="token string">&quot;${data.&quot;</span> <span class="token operator">+</span> regArr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;{&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;}&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;}&quot;</span>
<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
_text <span class="token operator">=</span> arr<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">//初始text变为后半段字符串</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>最后加入依赖对象 list 和更改 View:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>getVarArr<span class="token punctuation">.</span>arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">_dom</span><span class="token operator">:</span> text<span class="token punctuation">,</span>
  <span class="token literal-property property">_text</span><span class="token operator">:</span> <span class="token string">&quot;`&quot;</span> <span class="token operator">+</span> str <span class="token operator">+</span> <span class="token string">&quot;`&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
text<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token function">eval</span><span class="token punctuation">(</span><span class="token string">&quot;`&quot;</span> <span class="token operator">+</span> str <span class="token operator">+</span> <span class="token string">&quot;`&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>至此，转换插值已经完成。对模板的其他操作也在这里进行。</p><h3 id="observer" tabindex="-1"><a class="header-anchor" href="#observer" aria-hidden="true">#</a> observer</h3><p>监听 data 对象。使用<code>Proxy</code>对初始 data 进行代理，改变添加<code>get</code>，<code>set</code>方法，在 set 得时候通知视图改变。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> proxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function">get</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">,</span> receiver<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> target<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> receiver<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    target<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>
    observer<span class="token punctuation">.</span>pud<span class="token punctuation">.</span><span class="token function">nostiy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// do something</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">nostiy</span><span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">;</span><span class="token comment">//这里得data 指向 proxy</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>arr<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    e<span class="token punctuation">.</span>_dom<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token function">eval</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>_text<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="mount" tabindex="-1"><a class="header-anchor" href="#mount" aria-hidden="true">#</a> mount()</h3><p>最后调用<code>mount()</code>,把初始传入得属性加入到 proxy 上，放回这个 proxy。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">mount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">addProps</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>proxy<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>proxy<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="效果" tabindex="-1"><a class="header-anchor" href="#效果" aria-hidden="true">#</a> 效果：</h3><p>页面：</p><img src="data:image/png;base64,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" width="100%"><p>对象：</p><img src="/assets/result_two.ff46b447.png" width="100%"><h2 id="元素属性" tabindex="-1"><a class="header-anchor" href="#元素属性" aria-hidden="true">#</a> 元素属性</h2><p>如下 html 代码：</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getZero()<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{zero}++<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>需要将上述<code>button</code>中得属性*click=&quot;getZero()&quot;*转换成给 button 这个元素添加对应方法，在之前递归遍历中添加对 dom 操作得函数</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">isDom</span><span class="token punctuation">(</span>nodes<span class="token punctuation">,</span> component<span class="token punctuation">,</span> methods<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>具体内容如下,遍历 dom 得属性组，和传入构造函数中得<code>methods</code>进行比对，再给 dom 添加事件即可。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">isDom</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">dom<span class="token punctuation">,</span> component<span class="token punctuation">,</span> methods</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">forEach</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span>dom<span class="token punctuation">.</span>attributes<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">values</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>values<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">&quot;click&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">forEach</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>methods<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">method</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>method<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">===</span> values<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;(&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;)&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          dom<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            method<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>component<span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>注意，这里得<code>component</code>，是完成数据劫持后得 proxy 对象，因此我把之前得 compile 方法改成了 class 来进行处理。再劫持了<code>data</code>后进行 dom 方法得绑定。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> compile <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Compile</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>el<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">,</span> methods<span class="token punctuation">)</span><span class="token punctuation">;</span>
compile<span class="token punctuation">.</span><span class="token function">addComponent</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>proxy<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="双向绑定" tabindex="-1"><a class="header-anchor" href="#双向绑定" aria-hidden="true">#</a> 双向绑定</h2><p>绑定与 input 上的双向绑定，即 input 的 value 绑定 data 里面的值，data 的值改变就去改变 value，监听 input 输入事件去修改 value。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 54015459+learner-pm@users.noreply.github.com">l_pm</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/project/thesis.html" class="" aria-label="设计"><!--[--><!--]--> 设计 <!--[--><!--]--></a></span><!----></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.310117e3.js" defer></script>
  </body>
</html>
